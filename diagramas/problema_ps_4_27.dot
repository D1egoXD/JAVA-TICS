digraph GeneracionVectorB {
    rankdir=TB;
    node [shape=box, style=filled, fontname="Arial", fontsize=10];
    edge [fontname="Arial", fontsize=9];

    // Nodos principales
    inicio [label="INICIO", shape=oval, fillcolor="#90EE90", color=black, fontcolor=black];
    leerN [label="Leer N", shape=parallelogram, fillcolor="#FFFACD", color=black, fontcolor=black];
    validarN [label="1 ≤ N ≤ 50", shape=diamond, fillcolor="#ADD8E6", color=black, fontcolor=black];
    mensajeError [label="Escribir\n'Error: N debe\nestar entre\n1 y 50'", shape=egg, fillcolor="#FFFACD", color=black, fontcolor=black];
    
    // Lectura de matriz A
    escribirMensaje [label="Escribir\n'Ingrese elementos\nde matriz NxN'", shape=parallelogram, fillcolor="#FFFACD", color=black, fontcolor=black];
    initI1 [label="I ← 0", shape=box, fillcolor="#ADD8E6", color=black, fontcolor=black];
    decisionI1 [label="I < N", shape=diamond, fillcolor="#ADD8E6", color=black, fontcolor=black];
    initJ1 [label="J ← 0", shape=box, fillcolor="#ADD8E6", color=black, fontcolor=black];
    decisionJ1 [label="J < N", shape=diamond, fillcolor="#ADD8E6", color=black, fontcolor=black];
    leerElemento [label="Leer A[I][J]", shape=parallelogram, fillcolor="#FFFACD", color=black, fontcolor=black];
    incrementJ1 [label="J ← J + 1", shape=box, fillcolor="#ADD8E6", color=black, fontcolor=black];
    incrementI1 [label="I ← I + 1", shape=box, fillcolor="#ADD8E6", color=black, fontcolor=black];
    
    // Generar vector B
    initI2 [label="I ← 0", shape=box, fillcolor="#ADD8E6", color=black, fontcolor=black];
    decisionI2 [label="I < N", shape=diamond, fillcolor="#ADD8E6", color=black, fontcolor=black];
    calcMod [label="RESTO ← (I+1) mod 3", shape=box, fillcolor="#ADD8E6", color=black, fontcolor=black];
    checkMod [label="RESTO = ?", shape=diamond, fillcolor="#ADD8E6", color=black, fontcolor=black];
    
    // Caso 1: Suma de fila
    caso1 [label="B[I] ← Suma\nde fila I", shape=box, fillcolor="#ADD8E6", color=black, fontcolor=black];
    
    // Caso 2: Producto de columna
    caso2 [label="B[I] ← Producto\nde columna I", shape=box, fillcolor="#ADD8E6", color=black, fontcolor=black];
    
    // Caso 3: División
    caso3Calc [label="PROD ← Producto col I-1\nSUMA ← Suma fila I-2", shape=box, fillcolor="#ADD8E6", color=black, fontcolor=black];
    caso3Check [label="SUMA = 0", shape=diamond, fillcolor="#ADD8E6", color=black, fontcolor=black];
    caso3Div0 [label="B[I] ← 0\nEscribir advertencia", shape=box, fillcolor="#ADD8E6", color=black, fontcolor=black];
    caso3Div [label="B[I] ← PROD / SUMA", shape=box, fillcolor="#ADD8E6", color=black, fontcolor=black];
    
    conector1 [label="", shape=circle, width=0.3, height=0.3, fillcolor="#ADD8E6", color=black];
    incrementI2 [label="I ← I + 1", shape=box, fillcolor="#ADD8E6", color=black, fontcolor=black];
    
    // Salida
    escribirB [label="Escribir\nVector B", shape=egg, fillcolor="#FFFACD", color=black, fontcolor=black];
    conector2 [label="", shape=circle, width=0.3, height=0.3, fillcolor="#ADD8E6", color=black];
    fin [label="FIN", shape=oval, fillcolor="#F08080", color=black, fontcolor=black];
    
    // Conexiones principales
    inicio -> leerN;
    leerN -> validarN;
    validarN -> escribirMensaje [label="Sí"];
    validarN -> mensajeError [label="No"];
    
    // Lectura de matriz (doble ciclo)
    escribirMensaje -> initI1;
    initI1 -> decisionI1;
    decisionI1 -> initJ1 [label="Sí"];
    decisionI1 -> initI2 [label="No"];
    initJ1 -> decisionJ1;
    decisionJ1 -> leerElemento [label="Sí"];
    decisionJ1 -> incrementI1 [label="No"];
    leerElemento -> incrementJ1;
    incrementJ1 -> decisionJ1;
    incrementI1 -> decisionI1;
    
    // Generación de vector B
    initI2 -> decisionI2;
    decisionI2 -> calcMod [label="Sí"];
    decisionI2 -> escribirB [label="No"];
    calcMod -> checkMod;
    
    // Casos según mod
    checkMod -> caso1 [label="1"];
    checkMod -> caso2 [label="2"];
    checkMod -> caso3Calc [label="0"];
    
    caso1 -> conector1;
    caso2 -> conector1;
    
    caso3Calc -> caso3Check;
    caso3Check -> caso3Div0 [label="Sí"];
    caso3Check -> caso3Div [label="No"];
    caso3Div0 -> conector1;
    caso3Div -> conector1;
    
    conector1 -> incrementI2;
    incrementI2 -> decisionI2;
    
    // Fin
    escribirB -> conector2;
    mensajeError -> conector2;
    conector2 -> fin;
}
